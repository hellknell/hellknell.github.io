{"version":3,"file":"js/199.16dfbb8f.js","mappings":"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","sources":["webpack://web/./src/util/request.js","webpack://web/./src/component/station-select.vue","webpack://web/./src/component/station-select.vue?812c","webpack://web/./src/views/main/TicketView.vue","webpack://web/./src/views/main/TicketView.vue?88fd"],"sourcesContent":["import axios from 'axios'\r\nimport store from \"@/store\";\r\nimport {notification} from \"ant-design-vue\";\r\nimport router from \"@/router\";\r\n\r\n// 创建可一个新的axios对象\r\nconst request = axios.create({\r\n    baseURL: process.env.VUE_APP_BASEURL,   // 后端的接口地址  ip:port\r\n    timeout: 30000                          // 30s请求超时\r\n})\r\n\r\n// request 拦截器\r\n// 可以自请求发送前对请求做一些处理\r\n// 比如统一加token，对请求参数统一加密\r\nrequest.interceptors.request.use(config => {\r\n    config.headers['Content-Type'] = 'application/json;charset=utf-8';\r\n    let token = JSON.parse(localStorage.getItem('member')) || undefined;\r\n    config.headers.token = token?.token;\r\n    return config\r\n}, error => {\r\n    console.error('request error: ' + error) // for debug\r\n    return Promise.reject(error)\r\n});\r\n\r\n// response 拦截器\r\n// 可以在接口响应后统一处理结果\r\nrequest.interceptors.response.use(\r\n    response => {\r\n        let res = response.data;\r\n        if (res.code === '401') {\r\n            store.commit(\"setMember\", {});\r\n            notification.error({\r\n                message: '错误',\r\n                description: '登录已过期，请重新登录',\r\n            })\r\n            router.push('/login')\r\n        }\r\n        // 兼容服务端返回的字符串数据\r\n        if (typeof res === 'string') {\r\n            res = res ? JSON.parse(res) : res\r\n        }\r\n        return res;\r\n    },\r\n    error => {\r\n        console.log('返回错误：', error);\r\n        const response = error.response;\r\n        const status = response.status;\r\n        if (status === 401) {\r\n            // 判断状态码是401 跳转到登录页\r\n            console.log(\"未登录或登录超时，跳到登录页\");\r\n            store.commit(\"setMember\", {});\r\n            notification.error({ description: \"未登录或登录超时\" });\r\n            router.push('/login');\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n)\r\n\r\nexport default request","<template>\r\n  <a-select v-model:value=\"name\" :style=\"'width:'+width\" show-search :filterOption=\"filter\" allow-clear\r\n            :placeholder=\"info\" @change=\"onChange\">\r\n    <a-select-option v-for=\"(item,index) in stations\" :value=\"item.name\" :key=\"index\"\r\n                     :label=\"item.name+item.namePinyin+item.namePy\">\r\n      {{ item.name }} | {{ item.namePinyin }}--{{ item.namePy }}\r\n    </a-select-option>\r\n  </a-select>\r\n</template>\r\n<script setup>\r\nimport {defineEmits, defineProps, onMounted, ref, watch} from \"vue\";\r\nimport request from \"@/util/request\"\r\n\r\nconst emit = defineEmits(['update:modelValue'])\r\nconst props = defineProps(['info', 'modelValue', 'width'])\r\nconst stations = ref([])\r\nconst name = ref('')\r\nconst info = ref('')\r\nwatch(() => props.modelValue, () => {\r\n  name.value = props.modelValue\r\n}, {immediate: true})\r\nwatch(() => props.info, () => {\r\n  info.value = props.info\r\n}, {immediate: true})\r\nconst width = ref(props.width || '100%')\r\n\r\nif (width.value) {\r\n  width.value = width.value + 'px'\r\n}\r\nconst filter = (input, option) => {\r\n  return option.label.toLowerCase().indexOf(input.toLowerCase()) >= 0\r\n}\r\nconst onChange = (value) => {\r\n  emit('update:modelValue', value);\r\n  let train = stations.value.filter(item => item.code === value)[0];\r\n  if (train === null) {\r\n    train = {};\r\n  }\r\n  emit('change', train);\r\n};\r\nonMounted(() => {\r\n  let station = SESSION.get(SESSION_ALL_TRAIN) || [];\r\n  console.log('读取到了缓存:', stations)\r\n  if (Tool.isNotEmpty(station)) {\r\n    stations.value = station;\r\n    console.log(stations.value)\r\n  } else {\r\n    request.get(\"member/station/query-station\").then(res => {\r\n      if (res.success) {\r\n        stations.value = res.data\r\n        SESSION.set(SESSION_ALL_TRAIN, res.data)\r\n      }\r\n    })\r\n  }\r\n\r\n})\r\n</script>","import script from \"./station-select.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./station-select.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div class=\"ticket\">\r\n    <div class=\"search\" style=\"width: 100%\">\r\n      <a-space style=\"width: 100%;display: flex;justify-content: flex-start\">\r\n        <a-date-picker class=\"a1\" placeholder=\"请输入日期\" value-format=\"YYYY-MM-DD\" v-model:value=\"params.date\"/>\r\n        <station-select class=\"a2\" width=\"150\" info=\"请输入出发站\" v-model:value=\"params.start\"/>\r\n        <station-select class=\"a3\" width=\"150\" info=\"请输入到达站\" v-model:value=\"params.end\"/>\r\n        <a-button type=\"primary\" @click=\"handleQuery()\">查询</a-button>\r\n      </a-space>\r\n    </div>\r\n    <a-table :dataSource=\"dailyTrainTickets\"\r\n             @resizeColumn=\"handleResizeColumn\"\r\n             @change=\"handleTableChange\"\r\n             :columns=\"columns\"\r\n             :pagination=\"pagination\"\r\n             :loading=\"loading\">\r\n      <template #bodyCell=\"{ column,record }\">\r\n        <template v-if=\"column.dataIndex === 'operation'\">\r\n          <a-button danger type=\"primary\" @click=\"toOrder(record)\">预订</a-button>\r\n        </template>\r\n\r\n        <template v-if=\"column.dataIndex === 'ydz'\">\r\n          <div v-if=\"record.ydz>=0\">\r\n            <div style=\"text-align: center\"> {{ record.ydz }}张</div>\r\n            <div style=\"white-space:nowrap;text-align:center\">￥ {{ record.ydzPrice }}</div>\r\n\r\n          </div>\r\n          <div v-else style=\"text-align: center\">\r\n            --\r\n          </div>\r\n        </template>\r\n        <template v-if=\"column.dataIndex === 'start'\">\r\n          <div style=\"width: max-content\">\r\n            <div> {{ record.start }}</div>\r\n            <div style=\"text-align: center\">to</div>\r\n            <div>{{ record.end }}</div>\r\n          </div>\r\n        </template>\r\n        <template v-if=\"column.dataIndex === 'startTime'\">\r\n          <div style=\"width: max-content\">\r\n            <div> {{ record.startTime }}</div>\r\n            <div style=\"text-align: center\">~</div>\r\n            <div>{{ record.endTime }}</div>\r\n          </div>\r\n        </template>\r\n        <template v-if=\"column.dataIndex === 'edz'\">\r\n          <div v-if=\"record.edz>=0\">\r\n            <div style=\"text-align: center\">{{ record.edz }}张<br/></div>\r\n            <div style=\"text-align: center;;white-space: nowrap\">￥ {{ record.edzPrice }}</div>\r\n          </div>\r\n          <div v-else st\r\n               --\r\n               yle=\"text-align: center\"></div>\r\n        </template>\r\n        <template v-if=\"column.dataIndex === 'yw'\">\r\n          <div v-if=\"record.yw>=0\">\r\n            <div style=\"text-align: center\">{{ record.yw }}张</div>\r\n            <br/>\r\n            <div style=\"text-align: center;white-space: nowrap\">￥ {{ record.ywPrice }}</div>\r\n          </div>\r\n          <div style=\"text-align: center\" v-else>\r\n            --\r\n          </div>\r\n        </template>\r\n        <template v-if=\"column.dataIndex==='time'\">\r\n          <div style=\"width: max-content\">\r\n            <div> {{ record.time }}</div>\r\n            <div v-if=\"record.startTime<record.endTime\">当日到达</div>\r\n            <div v-else>次日到达</div>\r\n          </div>\r\n        </template>\r\n        <template v-if=\"column.dataIndex === 'rw'\">\r\n          <div v-if=\"record.rw>=0\">\r\n            <div style=\"text-align: center\">{{ record.rw }}张</div>\r\n            <div style=\"white-space: nowrap;text-align: center\">￥ {{ record.rwPrice }}</div>\r\n            <br/>\r\n          </div>\r\n          <div style=\"text-align: center\" v-else>\r\n            --\r\n          </div>\r\n        </template>\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n\r\n  <a-modal v-model:visible=\"visible\" title=\"余票信息\" @ok=\"handleOk\"\r\n           ok-text=\"确认\" cancel-text=\"取消\">\r\n    <a-form :model=\"dailyTrainTicket\" :label-col=\"{span: 4}\" :wrapper-col=\"{ span: 20 }\">\r\n      <a-form-item label=\"日期\">\r\n        <a-date-picker v-model:value=\"dailyTrainTicket.date\" valueFormat=\"YYYY-MM-DD\" placeholder=\"请选择日期\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"车次编号\">\r\n        <a-input v-model:value=\"dailyTrainTicket.trainCode\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"出发站\">\r\n        <a-input v-model:value=\"dailyTrainTicket.start\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"出发站拼音\">\r\n        <a-input v-model:value=\"dailyTrainTicket.startPinyin\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"出发时间\">\r\n        <a-time-picker v-model:value=\"dailyTrainTicket.startTime\" valueFormat=\"HH:mm:ss\" placeholder=\"请选择时间\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"出发站序\">\r\n        <a-input v-model:value=\"dailyTrainTicket.startIndex\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"到达站\">\r\n        <a-input v-model:value=\"dailyTrainTicket.end\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"到达站拼音\">\r\n        <a-input v-model:value=\"dailyTrainTicket.endPinyin\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"到站时间\">\r\n        <a-time-picker v-model:value=\"dailyTrainTicket.endTime\" valueFormat=\"HH:mm:ss\" placeholder=\"请选择时间\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"到站站序\">\r\n        <a-input v-model:value=\"dailyTrainTicket.endIndex\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"一等座余票\">\r\n        <a-input v-model:value=\"dailyTrainTicket.ydz\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"一等座票价\">\r\n        <a-input v-model:value=\"dailyTrainTicket.ydzPrice\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"二等座余票\">\r\n        <a-input v-model:value=\"dailyTrainTicket.edz\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"二等座票价\">\r\n        <a-input v-model:value=\"dailyTrainTicket.edzPrice\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"软卧余票\">\r\n        <a-input v-model:value=\"dailyTrainTicket.rw\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"软卧票价\">\r\n        <a-input v-model:value=\"dailyTrainTicket.rwPrice\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"硬卧余票\">\r\n        <a-input v-model:value=\"dailyTrainTicket.yw\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"硬卧票价\">\r\n        <a-input v-model:value=\"dailyTrainTicket.ywPrice\"/>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n<script setup>\r\nimport {onMounted, ref} from 'vue';\r\nimport request from \"@/util/request\";\r\nimport {notification} from \"ant-design-vue\";\r\nimport StationSelect from \"@/component/station-select.vue\";\r\nimport router from \"@/router\";\r\n\r\nconst visible = ref(false);\r\nlet dailyTrainTicket = ref({\r\n  id: undefined,\r\n  date: undefined,\r\n  trainCode: undefined,\r\n  start: undefined,\r\n  startPinyin: undefined,\r\n  startTime: undefined,\r\n  startIndex: undefined,\r\n  end: undefined,\r\n  endPinyin: undefined,\r\n  endTime: undefined,\r\n  endIndex: undefined,\r\n  ydz: undefined,\r\n  ydzPrice: undefined,\r\n  edz: undefined,\r\n  edzPrice: undefined,\r\n  rw: undefined,\r\n  rwPrice: undefined,\r\n  yw: undefined,\r\n  ywPrice: undefined,\r\n  createTime: undefined,\r\n  updateTime: undefined,\r\n});\r\nconst dailyTrainTickets = ref([]);\r\n// 分页的三个属性名是固定的\r\nconst pagination = ref({\r\n  total: 0,\r\n  current: 1,\r\n  pageSize: 10\r\n});\r\nconst handleResizeColumn = (w, col) => {\r\n  col.width = w\r\n}\r\nlet loading = ref(false);\r\nconst columns = [\r\n  {\r\n    title: '车次编号',\r\n    dataIndex: 'trainCode',\r\n    key: 'trainCode',\r\n    resizable: true,\r\n    width: 100\r\n  },\r\n  {\r\n    title: '车站',\r\n    dataIndex: 'start',\r\n    key: 'start',\r\n    width: 100,\r\n    resizable: true\r\n  },\r\n  {\r\n    title: '出发站序',\r\n    dataIndex: 'startIndex',\r\n    key: 'startIndex', width: 100,\r\n    resizable: true\r\n  },\r\n  {\r\n    title: '时间',\r\n    dataIndex: 'startTime',\r\n    width: 100,\r\n    key: 'startTime',\r\n    resizable: true\r\n  },\r\n  {\r\n    title: '历时',\r\n    dataIndex: 'time',\r\n    width: 100,\r\n    resizable: true\r\n  },\r\n\r\n  {\r\n    title: '到达站序',\r\n    dataIndex: 'endIndex',\r\n    width: 100,\r\n    resizable: true\r\n  },\r\n  {\r\n    title: '一等座余票',\r\n    dataIndex: 'ydz',\r\n    width: 150,\r\n    key: 'ydz',\r\n    resizable: true\r\n  },\r\n\r\n  {\r\n    title: '二等座余票',\r\n    width: 150,\r\n    dataIndex: 'edz',\r\n    key: 'edz',\r\n    resizable: true\r\n  },\r\n\r\n  {\r\n    title: '软卧余票',\r\n    dataIndex: 'rw',\r\n    key: 'rw',\r\n    resizable: true,\r\n    width: 150,\r\n  },\r\n\r\n  {\r\n    title: '硬卧余票',\r\n    dataIndex: 'yw',\r\n    width: 100,\r\n    key: 'yw',\r\n    resizable: true\r\n  },\r\n\r\n  {\r\n    title: '操作',\r\n    dataIndex: 'operation',\r\n    width: 200\r\n  }\r\n];\r\nconst toOrder = (record) => {\r\n  SESSION.set(SESSINO_ORDER, record)\r\n  router.push('/order');\r\n}\r\n\r\n\r\nconst onAdd = () => {\r\n  dailyTrainTicket.value = {};\r\n  visible.value = true;\r\n};\r\nconst params = ref({\r\n  date: undefined,\r\n  start: undefined,\r\n  end: undefined\r\n})\r\n\r\n\r\nconst handleQuery = (param) => {\r\n  if (Tool.isEmpty(params.value.date)) {\r\n    notification.error({description: '请输入出发日期'})\r\n    return;\r\n  }\r\n  if (Tool.isEmpty(params.value.start)) {\r\n    notification.error({description: '请输入出发站'})\r\n    return\r\n  }\r\n\r\n  if (Tool.isEmpty(params.value.end)) {\r\n    notification.error({description: '请输入目的站'})\r\n    return;\r\n  }\r\n  SESSION.set(SESSINO_TICKET_PARAMS, params.value)\r\n  if (!param) {\r\n    param = {\r\n      pageNum: 1,\r\n      pageSize: pagination.value.pageSize\r\n    };\r\n  }\r\n  loading.value = true;\r\n  request.get(\"member/daily-ticket/query-list\", {\r\n    params: {\r\n      pageNum: param.pageNum,\r\n      pageSize: param.pageSize,\r\n      date: params.value.date,\r\n      start: params.value.start,\r\n      end: params.value.end\r\n    }\r\n  }).then((res) => {\r\n    loading.value = false;\r\n    if (res.success) {\r\n      dailyTrainTickets.value = res.data.list;\r\n      pagination.value.current = param.pageNum;\r\n      pagination.value.total = res.data.total;\r\n\r\n    } else {\r\n      notification.error({description: res.msg});\r\n    }\r\n  });\r\n};\r\nconst handleTableChange = (page) => {\r\n  pagination.value.pageSize = page.pageSize;\r\n  handleQuery({\r\n    pageNum: page.current,\r\n    pageSize: page.pageSize\r\n  })\r\n}\r\nonMounted(() => {\r\n  let param = SESSION.get(SESSINO_TICKET_PARAMS) || {};\r\n  if (Tool.isNotEmpty(param)) {\r\n    params.value = param\r\n    handleQuery({\r\n      pageNum: 1,\r\n      pageSize: pagination.value.pageSize\r\n    })\r\n  }\r\n\r\n});\r\n</script>","import script from \"./TicketView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TicketView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["request","axios","create","baseURL","process","timeout","interceptors","use","config","headers","token","JSON","parse","localStorage","getItem","undefined","error","console","Promise","reject","response","res","data","code","store","commit","notification","message","description","router","push","log","status","emit","__emit","props","__props","stations","ref","name","info","watch","modelValue","value","immediate","width","filter","input","option","label","toLowerCase","indexOf","onChange","train","item","onMounted","station","SESSION","get","SESSION_ALL_TRAIN","Tool","isNotEmpty","then","success","set","__exports__","visible","dailyTrainTicket","id","date","trainCode","start","startPinyin","startTime","startIndex","end","endPinyin","endTime","endIndex","ydz","ydzPrice","edz","edzPrice","rw","rwPrice","yw","ywPrice","createTime","updateTime","dailyTrainTickets","pagination","total","current","pageSize","handleResizeColumn","w","col","loading","columns","title","dataIndex","key","resizable","toOrder","record","SESSINO_ORDER","params","handleQuery","param","isEmpty","SESSINO_TICKET_PARAMS","pageNum","list","msg","handleTableChange","page"],"sourceRoot":""}