"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[962],{8073:function(e,t,o){o(4114);var r=o(8355),s=o(5129),a=o(5108),l=o(9325);const n=r.A.create({baseURL:"http://api.example.com",timeout:3e4});n.interceptors.request.use((e=>{e.headers["Content-Type"]="application/json;charset=utf-8";let t=JSON.parse(localStorage.getItem("member"))||void 0;return e.headers.token=t?.token,e}),(e=>(console.error("request error: "+e),Promise.reject(e)))),n.interceptors.response.use((e=>{let t=e.data;return"401"===t.code&&(s.A.commit("setMember",{}),a.A.error({message:"错误",description:"登录已过期，请重新登录"}),l.A.push("/login")),"string"===typeof t&&(t=t?JSON.parse(t):t),t}),(e=>{console.log("返回错误：",e);const t=e.response,o=t.status;return 401===o&&(console.log("未登录或登录超时，跳到登录页"),s.A.commit("setMember",{}),a.A.error({description:"未登录或登录超时"}),l.A.push("/login")),Promise.reject(e)})),t.A=n},1962:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});o(4114);var r=o(6768),s=o(144),a=o(4232),l=o(7694),n=o(5108),i=o(1387),c=o(8073),u=o(5129);const p={class:"main",style:{display:"flex","align-items":"center","justify-content":"center","min-width":"800px",height:"100%"}},d={style:{"text-align":"center","font-weight":"bold"}},m={key:0,style:{"font-size":"11px",color:"dodgerblue"}};var b={__name:"LoginView",setup(e){const t=(0,s.KR)(!1),o=(0,s.KR)(!1),b=(0,s.Kh)({mobile:"",code:""}),g=()=>{console.log("init")},f=()=>{l.Ay.success("验证成功"),t.value=!0},h=(0,s.KR)(60);let v=(0,s.KR)(!1);const k=(0,i.rd)(),y=()=>{c.A.get("member/member/sendCode",{params:{mobile:b.mobile}}).then((e=>{"200"===e.code?(n.A.success({message:"提示",description:"验证码发送成功，请查收"}),v.value=!0,F()):l.Ay.error(e.msg)}))};let A=async(e,t)=>""===t?Promise.reject("请输入手机号"):/^1[3456789]\d{9}$/.test(t)?Promise.resolve():Promise.reject("手机号格式错误");const w={mobile:[{validator:A,trigger:"change"}]},F=()=>{const e=setInterval((()=>{h.value>0?h.value--:(clearInterval(e),v.value=!1,h.value=60)}),1e3)},_=function(){o.value=!0,t.value?n.A.error({message:"提示",description:"请先完成图形验证"}):(k.push("/"),c.A.post("member/member/login",b).then((e=>{"200"===e.code?(u.A.commit("setMember",e?.data),l.Ay.success("登录成功"),t.value=!1,k.push("/")):l.Ay.error(e.msg)})))};return(e,t)=>{const o=(0,r.g2)("rocket-two-tone"),l=(0,r.g2)("a-input"),n=(0,r.g2)("a-form-item"),i=(0,r.g2)("mi-captcha"),c=(0,r.g2)("a-button"),u=(0,r.g2)("a-form"),k=(0,r.g2)("a-col"),A=(0,r.g2)("a-row");return(0,r.uX)(),(0,r.CE)("div",p,[(0,r.bF)(A,{style:{width:"60%",height:"50%",display:"flex","align-items":"center",background:"rgba(243,255,255,0.2)","backdrop-filter":"blur(2px)",border:"1px solid #eee","border-radius":"10px"}},{default:(0,r.k6)((()=>[(0,r.bF)(k,{span:16,offset:4,style:{position:"relative",display:"flex","align-items":"center","flex-direction":"column"}},{default:(0,r.k6)((()=>[(0,r.Lk)("h1",d,[(0,r.eW)("12306 "),(0,r.bF)(o,{style:{fontSize:"30px"}}),(0,r.eW)(" 售票平台 ")]),(0,r.bF)(u,{model:b,name:"basic","wrapper-col":{span:24},autocomplete:"off",rules:w},{default:(0,r.k6)((()=>[(0,r.bF)(n,{"has-feedback":"","wrapper-col":{span:24},name:"mobile"},{default:(0,r.k6)((()=>[(0,r.bF)(l,{size:"large",placeholder:"请输入手机号",value:b.mobile,"onUpdate:value":t[0]||(t[0]=e=>b.mobile=e)},null,8,["value"])])),_:1}),(0,r.bF)(n,{"wrapper-col":{span:24},name:"code"},{default:(0,r.k6)((()=>[(0,r.bF)(l,{size:"large",placeholder:"请输入验证码",value:b.code,"onUpdate:value":t[1]||(t[1]=e=>b.code=e)},{addonAfter:(0,r.k6)((()=>[(0,s.R1)(v)?((0,r.uX)(),(0,r.CE)("div",m,(0,a.v_)(h.value)+"秒后重新获取",1)):((0,r.uX)(),(0,r.CE)("a",{key:1,onClick:y},"获取验证码"))])),_:1},8,["value"])])),_:1}),(0,r.bF)(n,{"wrapper-col":{span:24}},{default:(0,r.k6)((()=>[(0,r.bF)(i,{"theme-color":"#2F9688","border-color":"#2F9688","box-shadow-color":"#2F9688",height:"50",wight:"20",maskClosable:!0,mask:!0,onOnSuccess:f,onOnInit:g})])),_:1}),(0,r.bF)(n,{"wrapper-col":{span:24}},{default:(0,r.k6)((()=>[(0,r.bF)(c,{type:"primary","html-type":"submit",style:{width:"100%"},onClick:_},{default:(0,r.k6)((()=>[(0,r.eW)("登录")])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])}}},g=o(1241);const f=(0,g.A)(b,[["__scopeId","data-v-d15d69f4"]]);var h=f}}]);
//# sourceMappingURL=962.41f93b05.js.map