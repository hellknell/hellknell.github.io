"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[102],{8073:function(e,t,a){a(4114);var r=a(8355),n=a(5129),s=a(5108),o=a(9325);const i=r.A.create({baseURL:"http://api.example.com",timeout:3e4});i.interceptors.request.use((e=>{e.headers["Content-Type"]="application/json;charset=utf-8";let t=JSON.parse(localStorage.getItem("member"))||void 0;return e.headers.token=t?.token,e}),(e=>(console.error("request error: "+e),Promise.reject(e)))),i.interceptors.response.use((e=>{let t=e.data;return"401"===t.code&&(n.A.commit("setMember",{}),s.A.error({message:"错误",description:"登录已过期，请重新登录"}),o.A.push("/login")),"string"===typeof t&&(t=t?JSON.parse(t):t),t}),(e=>{console.log("返回错误：",e);const t=e.response,a=t.status;return 401===a&&(console.log("未登录或登录超时，跳到登录页"),n.A.commit("setMember",{}),s.A.error({description:"未登录或登录超时"}),o.A.push("/login")),Promise.reject(e)})),t.A=i},7102:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var r=a(6768),n=a(144),s=a(4232),o=a(8073),i=a(5108),d=a(8192);const l={size:14,style:{display:"flex","justify-content":"flex-start"}},u={key:0};var p={__name:"MyTicketView",setup(e){const t=(0,n.KR)([]),a=((0,n.KR)(!1),d.v6),p=(0,n.KR)({total:0,current:1,pageSize:10});let c=(0,n.KR)(!1);const g=[{title:"会员id",dataIndex:"memberId",key:"memberId"},{title:"乘客id",dataIndex:"passengerId",key:"pas"},{title:"乘客姓名",dataIndex:"passengerName"},{title:"日期",dataIndex:"date"},{title:"车次编号",dataIndex:"trainCode",key:"trainCode"},{title:"车座类型",dataIndex:"seatType"},{title:"厢序",dataIndex:"carriageIndex"},{title:"排号",dataIndex:"row"},{title:"列号",dataIndex:"col"},{title:"出发站",dataIndex:"start",key:"start"},{title:"出发时间",dataIndex:"startTime"},{title:"到达站",dataIndex:"end",key:"end"},{title:"到达时间",dataIndex:"endTime"}],m=e=>{e||(e={pageNum:1,pageSize:p.value.pageSize}),c.value=!0,o.A.get("/member/ticket/query-list",{params:{pageNum:e.pageNum,pageSize:e.pageSize}}).then((a=>{c.value=!1,a.success?(t.value=a.data.list,p.value.current=e.pageNum,p.value.total=a.content.total):i.A.error({description:a.msg})}))},k=e=>{p.value.pageSize=e.pageSize,m({pageNum:e.current,pageSize:e.pageSize})};return(0,r.sV)((()=>{m({pageNum:1,pageSize:p.value.pageSize})})),(e,o)=>{const i=(0,r.g2)("a-button"),d=(0,r.g2)("a-tag"),y=(0,r.g2)("a-table");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",l,[(0,r.bF)(i,{type:"primary",onClick:o[0]||(o[0]=e=>m())},{default:(0,r.k6)((()=>[(0,r.eW)("刷新")])),_:1})]),(0,r.bF)(y,{dataSource:t.value,columns:g,pagination:p.value,onChange:k,loading:(0,n.R1)(c)},{bodyCell:(0,r.k6)((({column:e,record:t})=>["seatType"===e.dataIndex?((0,r.uX)(!0),(0,r.CE)(r.FK,{key:0},(0,r.pI)((0,n.R1)(a),(e=>((0,r.uX)(),(0,r.CE)("span",{key:e.code},[e.code===t.seatType?((0,r.uX)(),(0,r.CE)("span",u,[(0,r.bF)(d,{color:"warning"},{default:(0,r.k6)((()=>[(0,r.eW)((0,s.v_)(e.desc),1)])),_:2},1024)])):(0,r.Q3)("",!0)])))),128)):(0,r.Q3)("",!0)])),_:1},8,["dataSource","pagination","loading"])],64)}}};const c=p;var g=c}}]);
//# sourceMappingURL=102.de135c3d.js.map